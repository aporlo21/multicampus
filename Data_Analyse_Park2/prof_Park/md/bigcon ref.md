# bigcon ref

item_amount 

item_price 정규화 차이 존재



실제 플레이어 거래 = 교환창 거래 [ 거래 구분 ] type

개인상점 - 0, 아이템 가격을 알수 없다 => 아데나 [ 화폐단위 ] : NA

source가 target에게 아데나를 준거



구매자 - 아이템타입:아데나 / 가격 NA

판매자 - 아이템타입:판매한아이템 / 가격 NA



## 네트워크 분석



노드와 엣지로 이뤄진 자료구조 

네트워크 - 노드 - 엣지' 

네트워크는 보통 행렬 형태로 표현

위에 친구 관계 네트워크에 대한 행렬은 0과 1로만 이뤄진 대칭 행렬이지만 방향성과 가중치를 넣으면 가중치 값이 들어간 비대칭 행렬이 됩니다



 **하위 요소의 특징에만 집착할 경우 소위 ‘큰 그림’을 놓칠 수 있는데 이런 것을 ‘환원주의 오류’ 라고 부릅니다**

연결 관계인 네트워크 구조도 분석해야 다이아몬드와 흑연의 차이점을 알 수 있습니다. 



**네트워크 분석 기법은 크게 **

**1) 노드 중요도 (node centrality) 측정, **

네트워크 구조를 고려했을 때 각 노드들이 얼마나 중요한 위치에 있는지를 정량화하는 것’을 말함 

가장 중요한 기차역 (노드)

**A. Degree centrality**

우선 가장 쉽게 할 수 있는 것은 각 역이 다른 역과 얼마나 많이 연결되어 있는지 그 횟수를 세어 중요도를 측정하는 방법입니다. 이걸 ‘degree centrality’ 라고 부릅니다. 

**B. Betweenness centrality**

왜냐하면 양쪽을 오고가려면 h 역을 만드시 통과해야 하기 때문이죠. 따라서 교통 흐름의 관점에서 보면 (비록 직접 연결된 기차역의 수는 적지만) h 노드가 가장 중요한 노드가 됩니다. 이렇게 노드 간의 흐름을 고려하여 중요도를 측정하는 방식을 ‘betweenness centrality’ 라고 부릅니다.

**C. Closeness centrality**

다시 말해 만약 기차역 간에 거리가 동일하다고 가정하면, 어떤 지역에서든지 p 로 갈 때 걸리는 시간이 평균적으로 가장 짧습니다. 이렇게 접근성 측면에서 노드의 중요도를 측정할 수도 있는데 이런 방식을 ‘closeness centrality’ 라고 부릅니다.

**D. Eigenvector centrality**

단순히 거리만 따지기 보다는 각 기차역의 이용객 수나 기차역 근처 지역의 특성 등을 고려하여 접근성을 따지는 것이 더 합리적일 수 있습니다. 이렇게 각 노드별 가중치를 고려하여 중요도를 측정하는 방식을 ‘eigenvector centrality’ 라고 부릅니다.



**2) 네트워크 구조 추정, **

네트워크를 분석할 때는 해당 네트워크가 어떻게 생겼는지 구조를 파악하는 것도 중요합니다

세 개의 네트워크는 서로 생김새는 다르지만 완전히 동일한 네트워크입니다. 단지 그리는 방식이 다를 뿐이죠. 이건 마치 동일한 데이터를 막대 그래프로 그리느냐 선 그래프로 그리느냐의 차이와 비슷합니다.

**네트워크 구조를 정량적으로 측정해주는 기법을 사용해야 합니다.** 

**A. Radius**

Radius는 우리말로 하면 ‘반지름’ 입니다. 반지름이란 원의 중심에서 표면까지의 최단 거리를 의미하죠. 

**B. Clustering coefficient**

클러스터링 계수는 즉, 어떤 노드와 연결된 노드들 중에 임의로 두 개를 골랐을 때 이 두 노드도 서로 연결되어 있을 확률입니다.

네트워크 이론에서는 어떤 세 개의 노드가 서로 연결되어 있는 구조를 ‘clique’라고 부릅니다 

모든 노드가 완전히 연결되어 있다고 할 때 나올 수 있는 clique 개수 대비 실제 네트워크 구조에 있는 clique 개수의 비율을 구하면 클러스터링 계수

**C. Degree assortativity**

따라서 가운데 노드는 degree centrality가 굉장히 높은 반면 이 노드와 연결된 나머지 노드들은 degree centrality가 1에 불과하죠. 따라서 이렇게 서로 상반된 노드끼리 연결된 구조를 갖는 네트워크는 degree assortativity가 -1에 가깝습니다.





**3)  Community detection 로 나눌 수 있습니다**



만약  **분석하고자 하는 네트워크의 규모가 커서 분석해야 할 노드 개수가 많고 구조도 복잡할 때는 이렇게 커뮤니티 탐지 기법을 이용해 좀 더 작은 여러 개의 소집단으로 묶은 후 커뮤니티 단위로 분석하는 것이 좋을 때가 많습니다.** 



**4) 정리)** 

구글 이전에 검색 회사들은 어떤 검색 결과를 가장 상위에 보여줄지를 판단하기 위해 각 웹페이지를 구성하는 하위 요소를 분석하는데 집중했습니다

구글은 ‘하이퍼 링크’를 통해 연결된 웹 페이지들의 네트워크 구조를 이용해 중요도를 측정하는 ‘페이지 랭크’라는 알고리즘을 이용 (노드 중요도 측정 방식 중 하나인 ‘eigenvector centrality’의 응용 버전입니다.)

**특히 MMORPG 장르는 네트워크 분석이 가장 빛을 발할 수 있는 분야 중 하나입니다.** 왜냐하면 MMORPG는 게임 내에서 여러 캐릭터끼리 서로 아이템을 주고 받거나, 전투나 채팅 등의 다양한 상호 작용이 이뤄질 뿐만 아니라 친구 관계나 길드 혹은 혈맹이라고 부르는 사회 조직을 구성하여 활동하는 등의 컨텐츠를 제공하기 때문이죠. 이런 것들은 모두 네트워크 분석에 잘 들어맞는 대상입니다.

반대로 생각해 보면, 바로 이런 특징을 갖고 있기 때문에 유저들을 정확히 분석하려면 단지 유저 개개인의 행동 패턴만 분석해서는 안되며 유저 간의 관계 구조에 대한 네트워크 분석이 대단히 중요합니다.

그렇기 때문에 엔씨소프트에서는 유저 세그먼테이션이나 이탈 예측, 악성 유저 탐지 등의 작업을 할 때 앞서 소개한 다양한 네트워크 분석 기법을 통해 추출한 특징들을 모델링에 활용합니다.



## 네트워크 분석 도구

제가 네트워크 분석을 위해 사용하는 도구는 크게 두 가지 입니다. 하나는 ‘igraph (http://igraph.org/)’ 라고 하는 네트워크 분석용 라이브러리이고 다른 하나는 ‘gephi (https://gephi.org/)’ 라고 하는 네트워크 시각화 및 탐사 분석용 도구입니다 

이 외에 igraph 와 함께 사용하면 좋은 패키지를 소개하자면, 우선 tidygraph 라는 패키지가 있습니다

따라서  **데이터를 분석할 때 개체에 대한 분석과 함께 개체 간의 관계를 분석하는 네트워크 분석 기법을 함께 이용하면 좀 더 풍부한 정보를 얻을 수 있으며 이를 통해 좀 더 정확한 모델링이 가능합니다.**